{% extends "dashboard/index.html" %}
{% load static %}
{% block body %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
  integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
  integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.10/jquery.mask.js"></script>


<body class="">
  <div class="wrapper ">
    <div class="sidebar" data-color="white" data-active-color="danger">
      <!--
          Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red | yellow"
      -->
      <div class="logo">
        <a href="http://www.creative-tim.com" class="simple-text logo-mini">
          <div class="logo-image-small">
            <img src="{% static '/dashboard/img/logo-small.png' %}">
          </div>
        </a>
        <a href="{% url 'dashboard' %}" class="simple-text logo-normal">
          Comunidade Cristã
          <!-- <div class="logo-image-big">
              <img src="../assets/img/logo-big.png">
            </div> -->
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav">
          <li>
            <a href="{% url 'dashboard' %}">
              <i class="nc-icon nc-bank"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <!--  <li>
              <a href="./icons.html">
                <i class="nc-icon nc-diamond"></i>
                <p>Icons</p>
              </a>
            </li>
            <li>
              <a href="./map.html">
                <i class="nc-icon nc-pin-3"></i>
                <p>Maps</p>
              </a>
            </li>
            <li>
              <a href="./notifications.html">
                <i class="nc-icon nc-bell-55"></i>
                <p>Notifications</p>
              </a>
            </li> -->
          <li class="active ">
            <a href="{% url 'cadastro' %}">
              <i class="nc-icon nc-single-02"></i>
              <p>CADASTRAR</p>
            </a>
          </li>
          <li>
            <a href="{% url 'list_cadastro' %}">
              <i class="nc-icon nc-tile-56"></i>
              <p>LISTAR CADASTROS</p>
            </a>
          </li>
          <!--  <li>
              <a href="./typography.html">
                <i class="nc-icon nc-caps-small"></i>
                <p>Typography</p>
              </a>
            </li>
            <li class="active-pro">
              <a href="./upgrade.html">
                <i class="nc-icon nc-spaceship"></i>
                <p>Upgrade to PRO</p>
              </a>
            </li> -->
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->

      {% endblock body %}

      {% block container %}
      <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="#pablo">Plataforma de Cadastros</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
            aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end" id="navigation">
            <!-- <form>
          <div class="input-group no-border">
            <input type="text" value="" class="form-control" placeholder="Procurar...">
            <div class="input-group-append">
              <div class="input-group-text">
                <i class="nc-icon nc-zoom-split"></i>
              </div>
            </div>
          </div>
        </form> -->
            <!--
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link btn-magnify" href="#pablo">
              <i class="nc-icon nc-layout-11"></i>
              <p>
                <span class="d-lg-none d-md-block">Stats</span>
              </p>
            </a>
          </li>
          <li class="nav-item btn-rotate dropdown">
            <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="nc-icon nc-bell-55"></i>
              <p>
                <span class="d-lg-none d-md-block">Some Actions</span>
              </p>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link btn-rotate" href="#pablo">
              <i class="nc-icon nc-settings-gear-65"></i>
              <p>
                <span class="d-lg-none d-md-block">Account</span>
              </p>
            </a>
          </li>
        </ul> -->
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <!-- <div class="panel-header panel-header-lg">

<canvas id="bigDashboardChart"></canvas>


</div> -->
      <!---->
      <div class="content">
        <div class="row">
          <!-- <div class="col-md-4">
        <div class="card card-user">
          <div class="image">
            <img src="../assets/img/damir-bosnjak.jpg" alt="...">
          </div>
          <div class="card-body">
            <div class="author">
              <a href="#">
                <img class="avatar border-gray" src="../assets/img/mike.jpg" alt="...">
                <h5 class="title">Chet Faker</h5>
              </a>
              <p class="description">
                @chetfaker
              </p>
            </div>
            <p class="description text-center">
              "I like the way you work it
              <br> No diggity
              <br> I wanna bag it up"
            </p>
          </div>
          <div class="card-footer">
            <hr>
            <div class="button-container">
              <div class="row">
                <div class="col-lg-3 col-md-6 col-6 ml-auto">
                  <h5>12
                    <br>
                    <small>Files</small>
                  </h5>
                </div>
                <div class="col-lg-4 col-md-6 col-6 ml-auto mr-auto">
                  <h5>2GB
                    <br>
                    <small>Used</small>
                  </h5>
                </div>
                <div class="col-lg-3 mr-auto">
                  <h5>24,6$
                    <br>
                    <small>Spent</small>
                  </h5>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <h4 class="card-title">Team Members</h4>
          </div>
          <div class="card-body">
            <ul class="list-unstyled team-members">
              <li>
                <div class="row">
                  <div class="col-md-2 col-2">
                    <div class="avatar">
                      <img src="../assets/img/faces/ayo-ogunseinde-2.jpg" alt="Circle Image" class="img-circle img-no-padding img-responsive">
                    </div>
                  </div>
                  <div class="col-md-7 col-7">
                    DJ Khaled
                    <br />
                    <span class="text-muted">
                      <small>Offline</small>
                    </span>
                  </div>
                  <div class="col-md-3 col-3 text-right">
                    <btn class="btn btn-sm btn-outline-success btn-round btn-icon"><i class="fa fa-envelope"></i></btn>
                  </div>
                </div>
              </li>
              <li>
                <div class="row">
                  <div class="col-md-2 col-2">
                    <div class="avatar">
                      <img src="../assets/img/faces/joe-gardner-2.jpg" alt="Circle Image" class="img-circle img-no-padding img-responsive">
                    </div>
                  </div>
                  <div class="col-md-7 col-7">
                    Creative Tim
                    <br />
                    <span class="text-success">
                      <small>Available</small>
                    </span>
                  </div>
                  <div class="col-md-3 col-3 text-right">
                    <btn class="btn btn-sm btn-outline-success btn-round btn-icon"><i class="fa fa-envelope"></i></btn>
                  </div>
                </div>
              </li>
              <li>
                <div class="row">
                  <div class="col-md-2 col-2">
                    <div class="avatar">
                      <img src="../assets/img/faces/clem-onojeghuo-2.jpg" alt="Circle Image" class="img-circle img-no-padding img-responsive">
                    </div>
                  </div>
                  <div class="col-ms-7 col-7">
                    Flume
                    <br />
                    <span class="text-danger">
                      <small>Busy</small>
                    </span>
                  </div>
                  <div class="col-md-3 col-3 text-right">
                    <btn class="btn btn-sm btn-outline-success btn-round btn-icon"><i class="fa fa-envelope"></i></btn>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div> -->
          <div class="col-md-12">
            <div class="card card-user">
              <div class="card-header">
                <h5 class="card-title">Ficha de Atendimento - Armonização</h5>
              </div>
              <div class="card-body">
                <form class="col s12" method="POST" enctype="multipart/form-data">{% csrf_token %}
                  <div class="row">
                    <div class="col-md-2">
                      <div class="form-group">
                        {{ form.numeroficha|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-10">
                      <div class="form-group">
                        {{ form.nomecompleto|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 pr-1">
                      <div class="form-group">
                        {{ form.datadenascimento|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-6 pl-1">
                      <div class="form-group">
                        {{ form.sexo|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3 pr-1">
                      <div class="form-group">
                        {{ form.estadocivil|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.religiao|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.etinia|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.telefone|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-3 pr-1">
                      <div class="form-group">
                        {{ form.filhossn|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.filhos|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.filhosmaiores|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.filhosmenores|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 pr-1">
                      <div class="form-group">
                        {{ form.graudeinstrucao|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-6 pl-1">
                      <div class="form-group">
                        {{ form.profissao|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-2 pr-1">
                      <div class="form-group">
                        {{ form.cep|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.rua|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-1 pl-1">
                      <div class="form-group">
                        {{ form.numero|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-3 pl-1">
                      <div class="form-group">
                        {{ form.bairro|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-2 pl-1">
                      <div class="form-group">
                        {{ form.cidade|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-1 pl-1">
                      <div class="form-group">
                        {{ form.uf|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        {{ form.hipotesedig|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        {{ form.atemdimento|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-8 pr-1">
                      <div class="form-group">
                        {{ form.retornoum|as_crispy_field }}
                      </div>
                    </div>
                    <div class="col-md-4 pl-1">
                      <div class="form-group">
                        {{ form.retornodois|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">
                      <div class="form-group">
                        {{ form.obs|as_crispy_field }}
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="update ml-auto mr-auto">
                      <button type="submit" class="btn btn-primary btn-round">Salvar Ficha</button>
                      {% if object %}
                      <a href="{% url 'deletar_cadastro' cadastro.id %}" class="btn btn-primary ">Deletar Ficha</a>
                      {% endif %}
                    </div>
                  </div>
                </form>
                {% if form.errors %}
                <div class="input-field col s12 m12 l12">
                  <p>NOT VALID</p>
                  {% for errors in form.errors %}
                  {{ errors }}
                  {% endfor %}
                </div>
                {% endif %}

              </div>
            </div>
          </div>
        </div>
      </div>

      <style type="text/css">
        .sexo {
          margin-top: 20px;
          margin-left: 10;
          padding: 0px;


        }
      </style>

      <script type="text/javascript">
        // DAte format
        $("#id_datadenascimento").mask("00/00/0000");
        $("#id_retornoum").mask("00/00/0000");
        // CPF MASk
        $("#id_cpfcnpj").mask("000.000.000-00");
        // MASK CEP
        $("#id_cep").mask("99.999-999");

        //MAS RG
        $("#id_rg").mask("99.999.999-9");
      </script>
      <script type="text/javascript">
        /* Máscaras ER */
        function mascara(o, f) {
          v_obj = o
          v_fun = f
          setTimeout("execmascara()", 1)
        }
        function execmascara() {
          v_obj.value = v_fun(v_obj.value)
        }
        function mtel(v) {
          v = v.replace(/\D/g, "");             //Remove tudo o que não é dígito
          v = v.replace(/^(\d{2})(\d)/g, "($1) $2"); //Coloca parênteses em volta dos dois primeiros dígitos
          v = v.replace(/(\d)(\d{4})$/, "$1-$2");    //Coloca hífen entre o quarto e o quinto dígitos
          return v;
        }
        function id(el) {
          return document.getElementById(el);
        }
        window.onload = function () {
          id('id_telefone').onkeyup = function () {
            mascara(this, mtel);
          }
        }

      </script>
      <!-- Adicionando Javascript -->
      <script type="text/javascript">

        $(document).ready(function () {

          function limpa_formulário_cep() {
            // Limpa valores do formulário de cep.
            $("#rua").val("");
            $("#bairro").val("");
            $("#cidade").val("");
            $("#uf").val("");
            $("#ibge").val("");
          }

          //Quando o campo cep perde o foco.
          $("#id_cep").blur(function () {

            //Nova variável "cep" somente com dígitos.
            var cep = $(this).val().replace(/\D/g, '');

            //Verifica se campo cep possui valor informado.
            if (cep != "") {

              //Expressão regular para validar o CEP.
              var validacep = /^[0-9]{8}$/;

              //Valida o formato do CEP.
              if (validacep.test(cep)) {

                //Preenche os campos com "..." enquanto consulta webservice.
                $("#id_rua").val("...");
                $("#id_bairro").val("...");
                $("#id_cidade").val("...");
                $("#id_uf").val("...");
                $("#id_ibge").val("...");

                //Consulta o webservice viacep.com.br/
                $.getJSON("https://viacep.com.br/ws/" + cep + "/json/?callback=?", function (dados) {

                  if (!("erro" in dados)) {
                    //Atualiza os campos com os valores da consulta.
                    $("#id_rua").val(dados.logradouro);
                    $("#id_bairro").val(dados.bairro);
                    $("#id_cidade").val(dados.localidade);
                    $("#id_uf").val(dados.uf);
                    $("#id_ibge").val(dados.ibge);
                  } //end if.
                  else {
                    //CEP pesquisado não foi encontrado.
                    limpa_formulário_cep();
                    alert("CEP não encontrado.");
                  }
                });
              } //end if.
              else {
                //cep é inválido.
                limpa_formulário_cep();
                alert("Formato de CEP inválido.");
              }
            } //end if.
            else {
              //cep sem valor, limpa formulário.
              limpa_formulário_cep();
            }
          });
        });

      </script>

      {% endblock container %}